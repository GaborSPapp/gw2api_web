<!DOCTYPE html>
<html>
<head>
  <title>gw2 helper</title>
</head>

<body>
  <p id="param">no recipe id</p>
  <input type="text" id="variable" value="">
  <button onclick="query()" value="">get</button>
  <p id="api_query">no data</p>
  
  <script>
    const urlParams = new URLSearchParams(window.location.search);
    const param = urlParams.get('recipe');
    if (param) {
      document.getElementById("param").innerHTML = "recipe id: " + param;
      document.getElementById("variable").value = param;
    }
    
    const Http = new XMLHttpRequest();
    const url='https://api.guildwars2.com/v2/recipes/'+param;
    Http.open("GET", url);
    Http.send();

    Http.onreadystatechange = (e) => {
      document.getElementById("api_query").innerHTML = "<pre>" + Http.responseText + "</pre>";
    }
    
    function query() {
      let variable = document.getElementById('variable').value;
      window.location.href = location.protocol + '//' + location.host + location.pathname + "?recipe=" + variable;
    }
  </script>
</body>

</html>
