<!DOCTYPE html>
<html>
<head>
  <title>gw2 helper</title>
</head>

<body>
  <p id="par">no parameter</p>
  <input type="text" id="variable" value="">
  <button name="id_var" value="" onclick="query();">get</button>
  <p id="api_query">no data</p>
  <script>
    const Http = new XMLHttpRequest();
    const url='https://api.guildwars2.com/v2/recipes/7236';
    Http.open("GET", url);
    Http.send();

    Http.onreadystatechange = (e) => {
      //document.getElementById("api_query").innerHTML = "<pre>" + Http.responseText + "</pre>";
    }
    
    const queryString = window.location.search;
    const urlParams = new URLSearchParams(queryString);
    const param = urlParams.get('var');
    console.log(param);
    if (param) {
      document.getElementById("par").innerHTML = param;
    }
    if ("") {
      console.log("ki√≠rja");
    }
    console.log(location.protocol + '//' + location.host + location.pathname);
    
    function query() {
      let variable = document.getElementById('variable').value;
      window.location.href = location.protocol + '//' + location.host + location.pathname + "?var=" + variable;
    }
  </script>
</body>

</html>
