<!DOCTYPE html>
<html>
<head>
  <title>gw2 helper</title>
</head>

<body>
  <p id="var">no var</p>
  <p id="api_query">no data</p>
  <form action="" method="post">
    <button name="id_var" value="upvote" onclick="query();">get</button>
  </form>
  <script>
    const Http = new XMLHttpRequest();
    const url='https://api.guildwars2.com/v2/recipes/7236';
    Http.open("GET", url);
    Http.send();

    Http.onreadystatechange = (e) => {
      //document.getElementById("api_query").innerHTML = "<pre>" + Http.responseText + "</pre>";
    }
    
    const queryString = window.location.search;
    const urlParams = new URLSearchParams(queryString);
    const variable = urlParams.get('var');
    console.log(variable);
    if (variable) {
      document.getElementById("var").innerHTML = variable;
    }
    console.log(location.protocol + '//' + location.host + location.pathname);
    
    function query() {
      window.location.href = location.protocol + '//' + location.host + location.pathname;
    }
  </script>
</body>

</html>
